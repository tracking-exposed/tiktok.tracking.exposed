---
title: Evidence collection page
subtitle: Do not share this link! Only you have access to it.
date: 2021-09-10T05:01:21+01:00
draft: false
extraCSS: "/css/personal.css"
type: app
---

<div class="row" id="personal">
    <div class="col-4">
        Pseudonym
        <div class="counter--entry" id="pseudonym">
        </div>
    </div>
    <div class="col-4">
        metadata extracted
        <div class="counter--entry" id="total--metadata">
        </div>
    </div>
    <div class="col-4">
        created at
        <div class="counter--entry" id="created--at">
        </div>
    </div>
</div>

<hr />

<div class="row">
  <div class="col-3">
  <h4>CSV download</h4>
  <hr/>
  <h5>
    <button id="foryou--csv" class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall" tabindex="0" type="button" title="Download CSV">
    <span class="MuiIconButton-label">
        <svg class="MuiSvgIcon-root MuiSvgIcon-colorError" focusable="false" viewBox="0 0 24 24" aria-hidden="true">
        <path
            d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM19 18H6c-2.21 0-4-1.79-4-4 0-2.05 1.53-3.76 3.56-3.97l1.07-.11.5-.95C8.08 7.14 9.94 6 12 6c2.62 0 4.88 1.86 5.39 4.43l.3 1.5 1.53.11c1.56.1 2.78 1.41 2.78 2.96 0 1.65-1.35 3-3 3zm-5.55-8h-2.9v3H8l4 4 4-4h-2.55z"
        ></path>
        </svg>
    </span>
    <span class="MuiTouchRipple-root"></span>
    </button>
    <span class="feed--name">
        For You (CSV)
    </span>
  </h5>

  <h5>
    <button id="following--csv" class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall" tabindex="0" type="button" title="Download CSV">
    <span class="MuiIconButton-label">
        <svg class="MuiSvgIcon-root MuiSvgIcon-colorError" focusable="false" viewBox="0 0 24 24" aria-hidden="true">
        <path
            d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM19 18H6c-2.21 0-4-1.79-4-4 0-2.05 1.53-3.76 3.56-3.97l1.07-.11.5-.95C8.08 7.14 9.94 6 12 6c2.62 0 4.88 1.86 5.39 4.43l.3 1.5 1.53.11c1.56.1 2.78 1.41 2.78 2.96 0 1.65-1.35 3-3 3zm-5.55-8h-2.9v3H8l4 4 4-4h-2.55z"
        ></path>
        </svg>
    </span>
    <span class="MuiTouchRipple-root"></span>
    </button>
    <span class="feed--name">
        Following (CSV)
    </span>
  </h5>

  <h5>
    <button id="search--csv" class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall" tabindex="0" type="button" title="Download CSV">
    <span class="MuiIconButton-label">
        <svg class="MuiSvgIcon-root MuiSvgIcon-colorError" focusable="false" viewBox="0 0 24 24" aria-hidden="true">
        <path
            d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM19 18H6c-2.21 0-4-1.79-4-4 0-2.05 1.53-3.76 3.56-3.97l1.07-.11.5-.95C8.08 7.14 9.94 6 12 6c2.62 0 4.88 1.86 5.39 4.43l.3 1.5 1.53.11c1.56.1 2.78 1.41 2.78 2.96 0 1.65-1.35 3-3 3zm-5.55-8h-2.9v3H8l4 4 4-4h-2.55z"
        ></path>
        </svg>
    </span>
    <span class="MuiTouchRipple-root"></span>
    </button>
    <span class="feed--name">
        Searches (CSV)
    </span>
  </h5>

  <h5>
    <button id="profile--csv" class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeSmall" tabindex="0" type="button" title="Download CSV">
    <span class="MuiIconButton-label">
        <svg class="MuiSvgIcon-root MuiSvgIcon-colorError" focusable="false" viewBox="0 0 24 24" aria-hidden="true">
        <path
            d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM19 18H6c-2.21 0-4-1.79-4-4 0-2.05 1.53-3.76 3.56-3.97l1.07-.11.5-.95C8.08 7.14 9.94 6 12 6c2.62 0 4.88 1.86 5.39 4.43l.3 1.5 1.53.11c1.56.1 2.78 1.41 2.78 2.96 0 1.65-1.35 3-3 3zm-5.55-8h-2.9v3H8l4 4 4-4h-2.55z"
        ></path>
        </svg>
    </span>
    <span class="MuiTouchRipple-root"></span>
    </button>
    <span class="feed--name">
        Profiles (CSV)
    </span>
  </h5>

  </div>

  <div class="col-9">
    <h4>Check out the API and format <a href="/docs/">Documentation</a></h4>
    You can also connect to:
    <br>
    "For You" JSON <code id="foryou--json"></code>
    <br>
    "Following" JSON <code id="following--json"></code>
  </div>

</div>

<hr/>
<h3>Recorded Searches, click on query to compare</h3>
<div id="searches--list" class="taboule-container">
    <span>Taboule here</span>
</div>

<!--
<hr/>
<h3>Other recorded activities</h3>
<div id="metadata--list" class="taboule-container"></div>
-->

<!--
<link href="/css/c3.min.css" rel="stylesheet">
<script src="/js/d3.min.js"></script>
<script src="/js/c3.min.js"></script>
-->

<script type="text/javascript" src="/js/global.js"></script>
<script type="text/javascript" src="/js/personal.js"></script>
<script type="text/javascript" src="/js/generated/taboule.js"></script>
<script type="text/javascript">

  async function fillUpPersonal(personalKey) {
    const url = buildApiUrl('personal', t + '/summary/json', 2);
    const response = await fetch(url);
    try {
        const data = await response.json();
        console.log(data);
        /* creationTime: "2022-03-07T08:45:12.512Z"
           lastActivity: "2022-03-07T08:45:12.512Z"
           p: "okra-cucumber-bun"
           publicKey: "HB..."
           version: "2.4.3" */
        $("#pseudonym").text(data.supporter.p);
        $("#created--at").text(data.supporter.creationTime);
        $("#total--metadata").text(data.counters.metadata);
    } catch(error) {
        console.log(error);
    }
  }

  const t = window.location.href.split('/#').pop();
  if(t.length !== 44 ) {
    console.log("Wrong token length in the URL", t.length);
    $("#counters").hide();
    // TODO test this condition and see how it looks like
    $("h3").text("Missing key in the URL; The browser extension generates automatically an access key the first time you access to tiktok.com from this browser.");
  }
  else {

    fillUpPersonal(t);

    $("#foryou--csv").on('click', function() {
        const csvurl = buildApiUrl('personal', t + '/foryou/csv', 2);
        window.location = csvurl;
    });
    $("#profile--csv").on('click', function() {
        const csvurl = buildApiUrl('personal', t + '/profile/csv', 2);
        window.location = csvurl;
    });
    $("#following--csv").on('click', function() {
        const csvurl = buildApiUrl('personal', t + '/following/csv', 2);
        window.location = csvurl;
    });
    $("#search--csv").on('click', function() {
        const csvurl = buildApiUrl('personal', t + '/search/csv', 2);
        window.location = csvurl;
    });

    $("#following--json").text(
        buildApiUrl('personal', t + '/following/json', 2)
    );
    $("#foryou--json").text(
        buildApiUrl('personal', t + '/foryou/json', 2)
    );

    const baseURL = (window.location.origin.match(/localhost/)) ?
        'http://localhost:14000/api' : "/api";

    console.log("Loading Taboule with URL", baseURL);
    window.Taboule({
        showInput: false,
        node: document.getElementById('searches--list'),
        baseURL,
        query: "tikTokPersonalSearch",
        pageSize: 25,
        initialParams: {
            publicKey: t,
        },
    });
  }
</script>
